{"ast":null,"code":"import React,{useEffect,useState}from'react';import UserForm from'../components/UserForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Home=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const fetchUsers=async()=>{try{setLoading(true);const response=await fetch('http://localhost:3001/api/users');if(!response.ok){throw new Error('Erro ao buscar usuários');}const data=await response.json();setUsers(data);setError(null);}catch(err){setError(err instanceof Error?err.message:'Erro desconhecido');}finally{setLoading(false);}};const handleUserAdded=()=>{fetchUsers();// Recarrega a lista após adicionar um usuário\n};const handleDeleteUser=async userId=>{try{const response=await fetch(\"http://localhost:3001/api/users/\".concat(userId),{method:'DELETE'});if(!response.ok){throw new Error('Erro ao deletar usuário');}await fetchUsers();// Recarrega a lista\n}catch(err){alert(err instanceof Error?err.message:'Erro ao deletar usuário');}};useEffect(()=>{fetchUsers();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',padding:'20px'},children:\"Carregando usu\\xE1rios...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',padding:'20px',color:'red'},children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Erro: \",error]}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchUsers,children:\"Tentar novamente\"})]});}return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:'800px',margin:'0 auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Adicionar Novo Usu\\xE1rio\"}),/*#__PURE__*/_jsx(UserForm,{onUserAdded:handleUserAdded}),/*#__PURE__*/_jsxs(\"h2\",{style:{marginTop:'40px'},children:[\"Lista de Usu\\xE1rios (\",users.length,\")\"]}),users.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Nenhum usu\\xE1rio encontrado.\"}):/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gap:'10px'},children:users.map(user=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ddd',padding:'15px',borderRadius:'5px',backgroundColor:'#f9f9f9',display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 5px 0'},children:user.name}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',color:'#666'},children:user.email}),/*#__PURE__*/_jsxs(\"small\",{style:{color:'#888'},children:[\"Criado em: \",new Date(user.createdAt).toLocaleDateString('pt-BR')]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(user.id),style:{backgroundColor:'#dc3545',color:'white',border:'none',padding:'8px 16px',borderRadius:'4px',cursor:'pointer'},children:\"Excluir\"})]},user.id))})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","UserForm","jsx","_jsx","jsxs","_jsxs","Home","users","setUsers","loading","setLoading","error","setError","fetchUsers","response","fetch","ok","Error","data","json","err","message","handleUserAdded","handleDeleteUser","userId","concat","method","alert","style","textAlign","padding","children","color","onClick","maxWidth","margin","onUserAdded","marginTop","length","display","gap","map","user","border","borderRadius","backgroundColor","justifyContent","alignItems","name","email","Date","createdAt","toLocaleDateString","id","cursor"],"sources":["/workspaces/Sistema-Cadastro---Usuarios/crud-fullstack/frontend/src/pages/Home.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport UserForm from '../components/UserForm';\n\ninterface User {\n    id: string;\n    name: string;\n    email: string;\n    createdAt: string;\n}\n\nconst Home: React.FC = () => {\n    const [users, setUsers] = useState<User[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState<string | null>(null);\n\n    const fetchUsers = async () => {\n        try {\n            setLoading(true);\n            const response = await fetch('http://localhost:3001/api/users');\n            if (!response.ok) {\n                throw new Error('Erro ao buscar usuários');\n            }\n            const data = await response.json();\n            setUsers(data);\n            setError(null);\n        } catch (err) {\n            setError(err instanceof Error ? err.message : 'Erro desconhecido');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleUserAdded = () => {\n        fetchUsers(); // Recarrega a lista após adicionar um usuário\n    };\n\n    const handleDeleteUser = async (userId: string) => {\n        try {\n            const response = await fetch(`http://localhost:3001/api/users/${userId}`, {\n                method: 'DELETE'\n            });\n            if (!response.ok) {\n                throw new Error('Erro ao deletar usuário');\n            }\n            await fetchUsers(); // Recarrega a lista\n        } catch (err) {\n            alert(err instanceof Error ? err.message : 'Erro ao deletar usuário');\n        }\n    };\n\n    useEffect(() => {\n        fetchUsers();\n    }, []);\n\n    if (loading) {\n        return <div style={{ textAlign: 'center', padding: '20px' }}>Carregando usuários...</div>;\n    }\n\n    if (error) {\n        return (\n            <div style={{ textAlign: 'center', padding: '20px', color: 'red' }}>\n                <p>Erro: {error}</p>\n                <button onClick={fetchUsers}>Tentar novamente</button>\n            </div>\n        );\n    }\n\n    return (\n        <div style={{ maxWidth: '800px', margin: '0 auto' }}>\n            <h2>Adicionar Novo Usuário</h2>\n            <UserForm onUserAdded={handleUserAdded} />\n            \n            <h2 style={{ marginTop: '40px' }}>Lista de Usuários ({users.length})</h2>\n            {users.length === 0 ? (\n                <p>Nenhum usuário encontrado.</p>\n            ) : (\n                <div style={{ display: 'grid', gap: '10px' }}>\n                    {users.map(user => (\n                        <div \n                            key={user.id} \n                            style={{ \n                                border: '1px solid #ddd', \n                                padding: '15px', \n                                borderRadius: '5px',\n                                backgroundColor: '#f9f9f9',\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                alignItems: 'center'\n                            }}\n                        >\n                            <div>\n                                <h3 style={{ margin: '0 0 5px 0' }}>{user.name}</h3>\n                                <p style={{ margin: '0', color: '#666' }}>{user.email}</p>\n                                <small style={{ color: '#888' }}>\n                                    Criado em: {new Date(user.createdAt).toLocaleDateString('pt-BR')}\n                                </small>\n                            </div>\n                            <button \n                                onClick={() => handleDeleteUser(user.id)}\n                                style={{ \n                                    backgroundColor: '#dc3545', \n                                    color: 'white', \n                                    border: 'none', \n                                    padding: '8px 16px', \n                                    borderRadius: '4px',\n                                    cursor: 'pointer'\n                                }}\n                            >\n                                Excluir\n                            </button>\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Home;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}